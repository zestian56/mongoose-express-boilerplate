{"version":3,"sources":["../../../src/config/db/mongo.js"],"names":["getMongoURL","options","url","servers","reduce","prev","cur","user","pass","substr","length","db","connect","mediator","once","console","log","mongoose","useNewUrlParser","then","emit","models","err"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAACC,OAAD,EAAa;AAC7B,MAAMC,GAAG,GAAGD,OAAO,CAACE,OAAR,CACPC,MADO,CACA,UAACC,IAAD,EAAOC,GAAP;AAAA,WAAeD,IAAI,GAAGC,GAAP,GAAa,GAA5B;AAAA,GADA,sBAESL,OAAO,CAACM,IAFjB,cAEyBN,OAAO,CAACO,IAFjC,OAAZ;AAGA,mBAAUN,GAAG,CAACO,MAAJ,CAAW,CAAX,EAAcP,GAAG,CAACQ,MAAJ,GAAa,CAA3B,CAAV,cAA2CT,OAAO,CAACU,EAAnD;AACH,CALD;;AAOA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACX,OAAD,EAAUY,QAAV,EAAuB;AACnCA,EAAAA,QAAQ,CAACC,IAAT,CAAc,YAAd,EAA4B,YAAM;AAC9BC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;;AACAC,sBAASL,OAAT,CAAiBZ,WAAW,CAACC,OAAD,CAA5B,EAAuC;AACnCiB,MAAAA,eAAe,EAAE;AADkB,KAAvC,EAEGC,IAFH,CAEQ,UAACR,EAAD;AAAA,aAAQE,QAAQ,CAACO,IAAT,CAAc,UAAd,EAA0BC,eAA1B,CAAR;AAAA,KAFR,EAGI,UAAAC,GAAG;AAAA,aAAIT,QAAQ,CAACO,IAAT,CAAc,UAAd,EAA0BE,GAA1B,CAAJ;AAAA,KAHP;AAIH,GAND;AAOH,CARD;;AASA,IAAMX,EAAE,GAAG;AACPC,EAAAA,OAAO,EAAPA;AADO,CAAX;eAIeD,E","sourcesContent":["import mongoose from 'mongoose'\nimport models from '../../common/models';\n\nconst getMongoURL = (options) => {\n    const url = options.servers\n        .reduce((prev, cur) => prev + cur + ',',\n            `mongodb://${options.user}:${options.pass}@`);\n    return `${url.substr(0, url.length - 1)}/${options.db}`\n};\n\nconst connect = (options, mediator) => {\n    mediator.once('boot.ready', () => {\n        console.log('Connecting to database...')\n        mongoose.connect(getMongoURL(options), {\n            useNewUrlParser: true\n        }).then((db) => mediator.emit('db.ready', models),\n            err => mediator.emit('db.error', err));\n    });\n};\nconst db = {\n    connect\n}\n\nexport default db"],"file":"mongo.js"}